# %YAML 1.2

# **Context: How to do this thing that only your colleague do when he's not here ?** 
# 
# This project contains a little framework to list procedures in a structured way that can be shared with all colleagues.
#    
# The YAML file contains all procedures and is versionable as a simple text file containing data : procedures or here soup recipes.
# This file contains a list of soup recipes in the form of a YAML file. 
#   
# This is an example for a more procedure dictionnary oriented documentation.

# 
# When there are many procedures or recipes, you can use the search tool of bookdown to find the one you need more easily.
# 
# Adding new procedure is relatively easy thanks to YAML file structure.
# 
# Recipes are identified by an id. There is a possibility to fill a dependencies field when other procedures / recipes are needed before.
# Two dates gives creation date and update date of the procedure involved.
#   
# Procedure [p004](p004-an-empty-shell-procedure.html) present an empty shell procedure to show few principles of structuring procedures here.
#   
# Procedure [p006](p006-to-build-this-book.html) is a minimal procedure showing how to build this book



Butternut squash soup with chilli & crème fraîche:
    id: p001
    date_creation: 2018-12-19
    date_update: 2019-01-07
    comments: |
      - Come in from the cold to a warming bowlful of autumn
      - Easy
      - Serves 4 
      - Prep: 15 mins ; Cook: 50 mins 
    author: Good Food
    path_procedure: https://www.bbcgoodfood.com/recipes/12808/butternut-squash-soup-with-chilli-and-crme-frache
    path_programs: /home/user/gui/kitchen/
    path_git: ' '
    path_results: /home/user/gui/dining_room
    sources: |
        - some ingredients from a market place (ingredients here but in a procedure there are some data sources instead)
        - butternut squash, about 1kg, peeled and deseeded
        - 2 tbsp olive oil
        - 1 tbsp butter
        - 2 onions, diced
        - 1 garlic clove, thinly sliced
        - 2 mild red chillies, deseeded and finely chopped
        - 850ml hot vegetable stock
        - 4 tbsp crème fraîche, plus more to serve
    context: from Automn leaves to winter end
    frequency_execution: every week
    dependencies: ' '
    languages: SAS, python
    steps: |
        - 1: Heat oven to 200C/180C fan/gas 6.
        - 2: Cut 1 peeled and deseeded butternut squash into large cubes, about 4cm/1½in across, then toss in a large roasting tin with 1 tbsp of the olive oil.
        - 3: Roast for 30 mins, turning once during cooking, until golden and soft.
        - 4: While the butternut squash cooks, melt 1 tbsp butter with the remaining 1 tbsp olive oil in a large saucepan, then add 2 diced onions, 1 thinly sliced garlic clove and ¾ of the 2 deseeded and finely chopped red chillies.
        - 5: Cover and cook on a very low heat for 15-20 mins until the onions are completely soft.
        - 6: Tip the butternut squash into the pan, add 850ml hot vegetable stock and 4 tbsp crème fraîche, then whizz with a stick blender until smooth. For a really silky soup, put the soup into a liquidiser and blitz it in batches.
        - 7: Return to the pan, gently reheat, then season to taste.
        - 8: Serve the soup in bowls with swirls of crème fraîche and a scattering of the remaining chopped chilli.

#####################################################################################################################
#####################################################################################################################

A fake procedure example:
   id: p002
   date_creation: 2018-12-19
   date_update: 2019-01-07
   comments: |
       For this procedure you need internet access and a R and RStudio setup
   author: GPR
   path_procedure: path/to/procedure/procedure_example
   path_programs: path/to/procedure/scripts
   path_git: ' '
   path_results: path/to/procedure/results
   sources: http://www.codage.ext.cnamts.fr/codif/tips/index_presentation.php?p_site=AMELI
   context: PostGreSQL database and API
   frequency_execution: weekly
   dependencies: ' '
   languages: R
   steps: |
        - 1: Download .dbf files and unzip
        - 2: Open arborescence_depuis_html2.R, change version parameter and launch this script
        - 3: Verify it's ok and take the results to update the database

#####################################################################################################################
#####################################################################################################################

Sweet potato & lentil soup:
    id: p003
    date_creation: 2018-12-19
    date_update: 2019-01-07
    comments: |
        - Satisfying and simple to make, homemade soup is a great supper or take-to-work lunch
        - Easy
        - Serves 6 
        - Prep: 10 mins ; Cook: 25 mins 
    author: Good Food
    path_procedure: https://www.bbcgoodfood.com/recipes/13416/sweet-potato-and-lentil-soup
    path_programs: /home/user/gui/kitchen/
    path_git: ' '
    path_results: /home/user/gui/dining_room
    sources: |
        - 2 tsp medium curry powder
        - 3 tbsp olive oil
        - 2 onions, grated
        - 1 eating apple, peeled, cored and grated
        - 3 garlic cloves, crushed
        - 20g pack coriander, stalks chopped
        - thumb-size piece fresh root ginger, grated
        - 800g sweet potatoes
        - 1.2l low-sodium vegetable stock
        - 100g red lentils
        - 300ml milk
        - juice 1 lime
    context: from Automn leaves to winter end
    frequency_execution: every week
    dependencies: ' '
    languages: R, Perl
    steps: |
        - 1: Put the curry powder into a large saucepan, then toast over a medium heat for 2 mins. 
        Add the olive oil, stirring as the spice sizzles in the pan. Tip in the onions, apple, garlic, 
        coriander stalks and ginger, season, then gently cook for 5 mins, stirring every so often.
        - 2: Meanwhile, peel, then grate the sweet potatoes. Tip into the pan with the stock, 
        lentils, milk and seasoning, then simmer, covered, for 20 mins. Blend until smooth using a stick blender. 
        Stir in the lime juice, check the seasoning and serve, topped with roughly-chopped coriander leaves.

#####################################################################################################################
#####################################################################################################################

An empty shell procedure:
   id: p004
   date_creation: 2018-12-19
   date_update: 2019-01-07
   comments: |
       where you write what you cannot write elsewhere
   author: GPR
   path_procedure: where is eventually a document (docx, pdf, html) with more detailed procedure
   path_programs: where are the scripts
   path_git: where the scripts are versioned
   path_results: where the results are produced
   sources: where to find the data source, or what they are
   context: In which context is this procedure involved, for what and 
   frequency_execution: weekly
   dependencies: 'list of other p[0-9]{3} procedures we need before to do this one (ie: p002, p003, p112)'
   languages: R, bash
   steps: |
        - 1: step one in few words (open the script)
        - 2: step two in few words (run the script)
        - 3: ok, you have the result
        - 4: analyze and communicate this result


#####################################################################################################################
#####################################################################################################################

Lightly spiced carrot soup:
   id: p005
   date_creation: 2018-12-19
   date_update: 2019-01-07
   comments: |
        - A satisfying soup which is delicately spiced and works well as a rustic starter
        - Easy 
        - Serves 6
   author: Emma Lewis
   path_procedure: https://www.bbcgoodfood.com/recipes/12276/lightly-spiced-carrot-soup
   path_programs: /home/user/gui/kitchen/
   path_git: ' '
   path_results: /home/user/gui/dining_room/
   sources: |
        - 1 tbsp vegetable oil
        - 1 onion, finely chopped
        - 1 garlic clove, chopped
        - knob of fresh root ginger
        - Ginger, grated
        - 1 red chilli
        - Chillies, deseeded and chopped
        - 1 tsp mild curry powder, plus extra
        - 1kg carrots, trimmed and sliced
        - 2 lemongrass stalks, bashed
        - 2 strips orange zest
        - 400g can coconut milk
        - 700ml vegetable stock
   context: Carrot is needed.
   frequency_execution: weekly
   dependencies: ' '
   languages: R, bash
   steps: |
        - 1: Heat the oil in a large pan with a lid. Tip in the onion, garlic, ginger and chilli, then cook for 3-5 mins until soft. 
        Stir in the curry powder, followed by the carrots, lemongrass and zest, then cover and cook over a low heat for 10 mins more.
        - 2: Give the coconut milk can a shake, then pour most of it into the pan along with the vegetable stock. Bring to the boil, 
        then turn down and simmer for 15 mins until the carrots are really soft. Remove the lemongrass and orange zest, 
        then use a stick blender or food processor to whizz until smooth. Ladle into bowls and top with a swirl of reserved coconut milk and 
        an extra sprinkling of curry powder, if you like.

#####################################################################################################################
#####################################################################################################################

To build this book:
   id: p006
   date_creation: 2018-12-19
   date_update: 2019-01-07
   comments: How to build this book
   author: Gui. Pre
   path_procedure: /it/is/here/you/are/right
   path_programs: ./_render_book.R
   path_git: https://github.com/GuillaumePressiat/reciproceed
   path_results: ./_book, ./docs
   sources: ./index_procedures.yaml
   context: Once you've build this, you will be able to build another book with your own procedures if you want
   frequency_execution: at your discretion !
   dependencies: ' '
   languages: R
   steps: |
        - 1: Download the git repository and unzip
        - 2: Open the RStudio proj and then open _render_book.R script, launch it
        - 3: You can modify the source yaml file to modify the book

